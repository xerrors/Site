---
title: "å‰ç«¯é¡¹ç›®ä¸­æ‰€é‡åˆ°çš„ä¸€äº›é—®é¢˜é›†åˆ"
date: 2020-02-29 21:03:13
permalink: /problems-and-solutions
tag: 
 - blog
 - å‰ç«¯
categories:
 - å‰ç«¯
 - Note
---

å¼€å‘ä¸­ä¼šé‡åˆ°çš„é—®é¢˜é›†åˆï¼Œæœ‰çš„æ¯”è¾ƒé«˜çº§ï¼Œæœ‰çš„è¶…çº§åŸºç¡€ï¼Œå…¨éƒ¨è®°ä¸‹æ¥äº†ã€‚ã€‚è¯´åˆ°åº•è¿˜æ˜¯åŸºç¡€ä¸æ‰å®ã€‚æˆ‘åœ¨æ¯ä¸€ä¸ªé‡åˆ°çš„é—®é¢˜çš„è§£å†³æ–¹æ³•æ—è¾¹éƒ½æ”¾äº†å¸®åŠ©æˆ‘è§£å†³é—®é¢˜çš„é“¾æ¥ã€‚å¸Œæœ›ä¹Ÿå¯ä»¥å¸®åŠ©åˆ°å…¶ä»–äººã€‚	

## Vue ç›¸å…³

### é…ç½®ä»£ç†è½¬å‘

````js
module.exports = {
  devServer: {
    // è¿™ä¸ªå‚æ•°ä¼šåœ¨æ¯æ¬¡ç¼–è¯‘å®Œæˆä¹‹åè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    open: true,
    host: 'localhost',
    port: 8080,
    https: false, // æ˜¯å¦æ”¯æŒ https
    hotOnly: true, // çƒ­æ›´æ–°ï¼ˆä¼¼ä¹æ²¡æœ‰ç”¨ï¼‰
    /*
     * ä»¥ä¸Šçš„ipå’Œç«¯å£æ˜¯æˆ‘ä»¬æœ¬æœºçš„;ä¹Ÿå°±æ˜¯é…ç½®ä¹‹åä½ åœ¨æµè§ˆå™¨é‡Œé¢æ‰€çœ‹åˆ°
     * çš„ç›®çš„ IP åœ°å€ä»¥åŠç«¯å£æ˜¯ä½ çš„ä¸»æœºï¼Œä¹Ÿå°±æ˜¯è·¨åŸŸè½¬å‘çš„ç»“æœã€‚
     */
      
    // ä¸‹é¢ä¸ºéœ€è¦è·¨åŸŸçš„
    proxy: { // é…ç½®è·¨åŸŸ
      '/api': {
        // è¿™é‡Œåå°çš„åœ°å€æ¨¡æ‹Ÿçš„;åº”è¯¥å¡«å†™ä½ ä»¬çœŸå®çš„åå°æ¥å£
        target: 'http://xxx.xxx.xxx.xxx/v2', 
        ws: true,
        changOrigin: true, // å…è®¸è·¨åŸŸ
        pathRewrite: {
          '^/api': ''// è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨è¿™ä¸ªapiå°±å¯ä»¥
        }
      }
    }
  }
}
````

PSï¼šè¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼Œå½“ä½ çš„`api`æˆ–è€…å…¶ä»–çš„ä¸€äº›é…ç½®æ›´æ”¹ä¹‹åéœ€è¦é‡æ–°ç¼–è¯‘ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œä½†æ˜¯äº‹å®å¦‚æ­¤ï¼ŒæŠ˜è…¾äº†å¾ˆä¹…æ‰çŸ¥é“ã€‚

> è¿™ä¸ªçš„å‚è€ƒæºæˆ‘ä¹‹å‰ä¿å­˜çš„è¢«æˆ‘å¼„ä¸¢äº†ï¼Œä¸è¿‡ç½‘ä¸Šä¸€æœä¸€å¤§å †ï¼Œä¹Ÿå°±ä¸å­˜åœ¨ä¾µä¸ä¾µæƒäº†å§ã€‚

### mount æ—¶è®¿é—® Vuex

åœ¨ä½¿ç”¨`state`é‡Œé¢çš„æ•°æ®çš„æ—¶å€™ï¼Œæ— è®ºæ˜¯åœ¨ `data`é‡Œé¢ä½¿ç”¨ï¼Œè¿˜æ˜¯åœ¨`mounted`é‡Œé¢ä½¿ç”¨éƒ½ä¼šå‡ºç°æ— æ³•è·å–`state`é‡Œé¢æ•°æ®çš„æƒ…å†µã€‚

```js
data () {
  return {
    form: {
      avatar: this.avatar,
      account: this.name,
      collection: {
        way: 'æ”¯ä»˜å®',
        account: '17685673489'
      },
      tel: this.tel
    }
  }
},
computed: {
  ...mapGetters(['avatar', 'name', 'tel'])
},
mounted () {
  this.form.avatar = this.$store.state.avatar
  this.form.account = this.$store.state.name
  this.form.tel = this.$store.state.tel
},
```

å¯¼è‡´æœ€ç»ˆæ¸²æŸ“ç»“æœä¸ºç©ºã€‚

#### åŸå› åˆ†æ

> å‚è€ƒï¼š[vuexä¸­çš„stateåœ¨ç»„ä»¶ä¸­å¦‚ä½•ç›‘å¬@æ˜é‡‘](https://juejin.im/post/5923a3bf2f301e006b272bed)
>
> åŸå› æ˜¯å› ä¸º `vuex`ä¸­çš„`state`ä¼šåœ¨æŸä¸€ä¸ªç»„ä»¶ä¸­ä½¿ç”¨ï¼Œè€Œè¿™ä¸ªçŠ¶æ€çš„åˆå§‹åŒ–æ˜¯é€šè¿‡å¼‚æ­¥åŠ è½½å®Œæˆçš„ã€‚ç»„ä»¶åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œè·å–çš„`state`çŠ¶æ€ä¸ºç©ºã€‚ä¹Ÿå°±æ˜¯è¯´ç»„ä»¶åœ¨å¼‚æ­¥å®Œæˆä¹‹å‰å°±å·²ç»å®Œæˆæ¸²æŸ“äº†ï¼Œå¯¼è‡´ç»„ä»¶çš„æ•°æ®æ²¡æœ‰æ¥å¾—åŠæ¸²æŸ“ã€‚

ç®€å•æ¥è¯´å°±æ˜¯å½“`data`åœ¨æ¸²æŸ“çš„æ—¶å€™ï¼Œ`state`è¿˜æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥æ²¡æ³•è·å¾—æˆ‘ä»¬æƒ³è¦çš„å€¼ã€‚

#### è§£å†³åŠæ³•

ç¬¬ä¸€ç§è§£å†³åŠæ³•ï¼Œå®Œç¾è§£å†³è·å–æ•°æ®çš„é—®é¢˜ã€‚

```js
computed: {
  ...mapGetters(['avatar', 'name', 'tel']),
  form () {
    return {
      avatar: this.avatar,
      account: this.name,
      collection: {
        way: 'æ”¯ä»˜å®',
        account: '17685673489'
      },
      tel: this.tel
    }
  }
}
```

è¿™æ ·è™½ç„¶èƒ½å¤Ÿè§£å†³è·å–æ•°æ®çš„é—®é¢˜ï¼Œä½†æ˜¯ç”±äºæˆ‘çš„ä½¿ç”¨åœºæ™¯æ˜¯ä½œç”¨ä¸è¡¨å•ï¼Œéœ€è¦å¯ä»¥ä¿®æ”¹ï¼›å¦‚æœé‡‡ç”¨ä¸Šé¢æ‰€è¿°æ–¹æ³•çš„è¯ä¼šå¯¼è‡´è¡¨å•é‡Œé¢çš„æ•°æ®æ— æ³•è¢«ä¿®æ”¹ï¼Œè¾¾ä¸åˆ°æˆ‘çš„ç›®çš„ã€‚å½“ç„¶ï¼Œå¯¹äºåªéœ€è¦è·å–æ•°æ®çš„æƒ…å†µè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³åŠæ³•ã€‚

~~ç¬¬äºŒç§è§£å†³åŠæ³•ï¼Œæˆ‘éœ€è¦çš„æ–¹å¼æ˜¯èƒ½å¤Ÿåœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹åè·å–ä¸€æ¬¡æ•°æ®ï¼ŒåŒæ—¶æˆ‘åé¢è¿˜å¯ä»¥ä¿®æ”¹ã€‚å¥½å§ï¼Œæˆ‘æ²¡æ‰¾åˆ°å¥½çš„åŠæ³•ï¼Œæœ€åæˆ‘é‡‡ç”¨çš„åŠæ³•æ˜¯ä½¿ç”¨`state`é‡Œé¢çš„æ•°æ®æ˜¾ç¤ºåœ¨`input`ä¸Šé¢çš„`placeholder`ä¸Šé¢ï¼Œå®Œç¾è§£å†³é—®é¢˜ã€‚~~

ç¬¬äºŒç§åŠæ³•å°±æ˜¯ä½¿ç”¨è®¡ç®—å±æ€§çš„`get`å’Œ`set`æ–¹æ³•ï¼š

> å‚è€ƒå®˜æ–¹ç¤ºä¾‹ï¼š[åŒå‘ç»‘å®šçš„è®¡ç®—å±æ€§](https://vuex.vuejs.org/zh/guide/forms.html#åŒå‘ç»‘å®šçš„è®¡ç®—å±æ€§) 
>
> è¯´å®è¯ä¸€å¹´å¤šæ²¡ç”¨è¿™ä¸ªå±æ€§æˆ‘éƒ½ç»™å¿˜è®°äº†ï¼Œä½†æ˜¯æˆ‘æœ€ç»ˆè¿˜æ˜¯æ²¡æœ‰é‡‡ç”¨è¿™ä¸ªåŠæ³•ï¼Œå› ä¸ºæˆ‘è¦ä¿®æ”¹çš„æ•°æ®å¾ˆå¤šï¼Œæ˜¯ä¸€ä¸ªè¡¨å•ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯ä½¿ç”¨äº†è°ƒç”¨åç«¯æ¥å£æ¥è·å¾—æ•°æ®ã€‚

```js
computed: {
  message: {
    get () {
      return this.$store.state.obj.message
    },
    set (value) {
      this.$store.commit('updateMessage', value)
    }
  }
}
```

### åœ¨ js æ–‡ä»¶ä¸­è®¿é—® vuex çš„çŠ¶æ€

è¿™ä¸€å¬å°±æ˜¯åŸºæœ¬åŠŸä¸æ‰å®ï¼Œç¢°åˆ°è¿™ç§æƒ…å†µï¼Œç¬¬ä¸€æ—¶é—´å°±æ˜¯å»[å®˜ç½‘](https://vuex.vuejs.org/zh/guide/)ï¼Œä¸è¿‡å¾ˆé—æ†¾ï¼Œæ²¡æ‰¾åˆ°ã€‚åŸæœ¬æˆ‘è®°å¾—æ˜¯æœ‰çš„ï¼Œå¯èƒ½å®˜æ–¹æ›´æ–°ç»™ä¿®æ”¹äº†ï¼ˆæœç„¶æˆ‘è¿˜æ˜¯å¤ªèœäº†ï¼‰ï¼Œå®˜ç½‘æ‰¾ä¸åˆ°é‚£å°±Googleå‘—ï¼Œæ‰¾åˆ°äº†ã€‚

> å‚è€ƒï¼š[æ€ä¹ˆåœ¨å•ç‹¬çš„jsæ–‡ä»¶ä¸­ä½¿ç”¨vuex?@segmentfault](https://segmentfault.com/q/1010000018127421)
>
> ä»ä¸Šé¢é‚£ä¸ªå›ç­”é‡Œé¢ä¹Ÿèƒ½å°è¯æˆ‘çš„è®°å¿†æ˜¯å¯¹çš„ï¼Œä¹‹å‰çš„å®˜æ–¹æ–‡æ¡£ä¸‹é¢å°±æ˜¯è¿™ä¸ªä¾‹å­ï¼ï¼ï¼ˆæœç„¶è¿˜æ˜¯æˆ‘å¤ªèœäº†ï¼Œå®˜æ–¹éƒ½è®¤ä¸ºå¤ªç®€å•ç»™åˆ æ‰äº†ï¼‰

```js
// store.js
const store = new Vuex.Store({
  state: {
    count: 1
  },
  mutations: {
    increment (state) {
      // å˜æ›´çŠ¶æ€
      state.count++
    }
  }
})

export default store

// a.js
import store from './store.js'

console.log(store.state.count) // 1
store.commit('increment')
console.log(store.state.count)// 2
```

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯é‚£é‡Œçš„`'./store.js`æ˜¯ç›¸å¯¹åœ°å€ï¼Œè¦æ³¨æ„ä¸‹è‡ªå·±çš„è·¯å¾„ä¸è¦é€‰é”™äº†'ï¼Œå¦å¤–å¦‚æœæ˜¯åˆšåŠ è½½çš„æ—¶å€™ï¼Œstateé‡Œé¢è¿˜æ²¡æœ‰æ•°æ®ï¼Œå¦‚æœç›´æ¥è°ƒç”¨å¯èƒ½ä¼šå‡ºç°é”™è¯¯ï¼Œéœ€è¦è¿›è¡Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºä¹‹åå†ä½¿ç”¨ã€‚

## åŸºç¡€é—®é¢˜

### JavaScript ç›¸å…³

å¾ˆå¤šæ—¶å€™å°±æ˜¯è®°ä¸ä½ï¼Œè¿˜æ˜¯ä¿å­˜ä¸€ä¸‹æ–¹ä¾¿ä»¥åæ¥æŸ¥

#### 1. å¦‚ä½•éå† JS å¯¹è±¡

æˆ‘æœ‰ä¸€ä¸ªå¯¹è±¡ï¼ˆå…¶å®æˆ‘è¿˜çœŸçš„æœ‰ä¸ªå¯¹è±¡ğŸ‘©ï¼‰ï¼Œé•¿è¿™æ ·ï¼š

```json
{
  "code": 1,
  "info": {
      "æ‰‹æœºçŠ¶æ€": ["æ­£å¸¸è¿›å…¥æ¡Œé¢","æ— æ³•å¼€æœºæˆ–è€…è¿›å…¥æ¡Œé¢","å…¨æ–°æœªæ‹†å°"],
      "å†…å­˜ã€å­˜å‚¨å®¹é‡": ["256G","128G","64G","32G"],
      "è´¦å·å¯å¦é€€å‡º": ["å¯æ­£å¸¸é€€å‡º","ä¸å¯é€€å‡º"],
      "ç£¨æŸç¨‹åº¦": ["å¤–å£³æ— ç‘•ç–µ","ç»†å¾®åˆ’ç—•æ— ç£•ç¢°","ç£•ç¢°æ‰æ¼†ã€è¾¹æ¡†ç£¨æŸ","å¤–å£³è£‚ç¼ã€å˜å½¢"],
      "å±å¹•ç£¨æŸ": ["å®Œç¾ä½¿ç”¨æ— åˆ’ç—•","ç»†å¾®åˆ’ç—•","åˆ’ä¼¤ã€è„±èƒ¶ã€å°ç¼ºè§’","ç¢è£‚ã€è¾¹è§’ç ´æŸ"],
      "å±å¹•æ˜¾ç¤º": ["å®Œç¾æ— ç‘•ç–µ","æ˜¾ç¤ºè‰²å·®ï¼Œæˆ–è½»å¾®æ³›é»„/äº®åç‚¹","æ˜¾ç¤ºçƒ§å±ï¼Œæˆ–æœ‰é€å›¾/é€å­—","æ˜¾ç¤ºæ¼æ¶²ï¼Œæˆ–é—ªçƒ/æ¨ªç«–çº¿/èŠ±å±"],
      "ç»´ä¿®çŠ¶å†µ": ["æ— ç»´ä¿®æƒ…å†µ","å±å¹•ç»´ä¿®","ä¸»æ¿ç»´ä¿®æˆ–åŠŸèƒ½æ•…éšœ","å±å¹•å’Œä¸»æ¿çš†æœ‰ç»´ä¿®"]
  }
}
```

æˆ‘è¿˜ä»æ¥æ²¡å†™è¿‡è¿™æ ·çš„æ•°æ®ï¼Œä½†æ˜¯æ—¢ç„¶æœ‰äº†ä¹Ÿæ²¡åŠæ³•å•Šï¼Œè¯•ç€éå†ä¸€ä¸‹å‘—ï¼

> æ‘˜è‡ªMDN
>
> ä¸‹é¢çš„å‡½æ•°æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚è¢«è°ƒç”¨æ—¶è¿­ä»£ä¼ å…¥å¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ç„¶åè¿”å›ä¸€ä¸ªæ‰€æœ‰å±æ€§åå’Œå…¶å¯¹åº”å€¼çš„å­—ç¬¦ä¸²ã€‚:smile:

```js
var obj = {a:1, b:2, c:3};
    
for (var prop in obj) {
  console.log("obj." + prop + " = " + obj[prop]);
}

// Output:
// "obj.a = 1"
// "obj.b = 2"
// "obj.c = 3"
```

> æ‘˜è‡ªMDNï¼Œ[æŸ¥çœ‹ç¤ºä¾‹](https://interactive-examples.mdn.mozilla.net/pages/js/object-entries.html)
>
> è¿˜å¯ä»¥ä½¿ç”¨`Object.entries()`æ–¹æ³•è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ï¼Œå…¶æ’åˆ—ä¸ä½¿ç”¨ `for...in`å¾ªç¯éå†è¯¥å¯¹è±¡æ—¶è¿”å›çš„é¡ºåºä¸€è‡´ï¼ˆåŒºåˆ«åœ¨äº for-in å¾ªç¯ä¹Ÿæšä¸¾åŸå‹é“¾ä¸­çš„å±æ€§ï¼‰

```js
const object1 = {
  a: 'somestring',
  b: 42
};

for (let [key, value] of Object.entries(object1)) {
  console.log(`${key}: ${value}`);
}

// expected output:
// "a: somestring"
// "b: 42"
// order is not guaranteed
```