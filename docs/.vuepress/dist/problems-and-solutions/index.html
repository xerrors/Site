<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端项目中所遇到的一些问题集合 | Xerrors</title>
    <meta name="description" content="Xerrors playground">
    <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.35c945c9.css" as="style"><link rel="preload" href="/assets/js/app.56a758de.js" as="script"><link rel="preload" href="/assets/js/9.6ec67018.js" as="script"><link rel="preload" href="/assets/js/37.224258d1.js" as="script"><link rel="prefetch" href="/assets/js/1.79ca702a.js"><link rel="prefetch" href="/assets/js/10.a5de939a.js"><link rel="prefetch" href="/assets/js/11.fbedc207.js"><link rel="prefetch" href="/assets/js/12.41f3b05c.js"><link rel="prefetch" href="/assets/js/13.35fb379a.js"><link rel="prefetch" href="/assets/js/14.bab2c4d2.js"><link rel="prefetch" href="/assets/js/15.3210ae2e.js"><link rel="prefetch" href="/assets/js/16.67a69f1e.js"><link rel="prefetch" href="/assets/js/17.de7d402b.js"><link rel="prefetch" href="/assets/js/18.b1c28020.js"><link rel="prefetch" href="/assets/js/19.e9c78bb9.js"><link rel="prefetch" href="/assets/js/2.3f0f59c3.js"><link rel="prefetch" href="/assets/js/20.228b7aa4.js"><link rel="prefetch" href="/assets/js/21.3b0d4968.js"><link rel="prefetch" href="/assets/js/22.99c57a19.js"><link rel="prefetch" href="/assets/js/23.192d2455.js"><link rel="prefetch" href="/assets/js/24.b89b0227.js"><link rel="prefetch" href="/assets/js/25.b608b320.js"><link rel="prefetch" href="/assets/js/26.bfacbaae.js"><link rel="prefetch" href="/assets/js/27.4a35c2b6.js"><link rel="prefetch" href="/assets/js/28.4224ee65.js"><link rel="prefetch" href="/assets/js/29.5048b567.js"><link rel="prefetch" href="/assets/js/3.032425b6.js"><link rel="prefetch" href="/assets/js/30.168e3a15.js"><link rel="prefetch" href="/assets/js/31.38d75d9d.js"><link rel="prefetch" href="/assets/js/32.2ab1a038.js"><link rel="prefetch" href="/assets/js/33.1ac38b43.js"><link rel="prefetch" href="/assets/js/34.7188f9aa.js"><link rel="prefetch" href="/assets/js/35.8f6d8daf.js"><link rel="prefetch" href="/assets/js/36.cd16401e.js"><link rel="prefetch" href="/assets/js/38.1b3c76a3.js"><link rel="prefetch" href="/assets/js/39.dad67a7b.js"><link rel="prefetch" href="/assets/js/40.f784a95b.js"><link rel="prefetch" href="/assets/js/41.d702ecf9.js"><link rel="prefetch" href="/assets/js/42.3f59547b.js"><link rel="prefetch" href="/assets/js/43.c9a2abad.js"><link rel="prefetch" href="/assets/js/44.68741331.js"><link rel="prefetch" href="/assets/js/45.6169fc66.js"><link rel="prefetch" href="/assets/js/46.c425b774.js"><link rel="prefetch" href="/assets/js/47.dc008414.js"><link rel="prefetch" href="/assets/js/48.afe79ea1.js"><link rel="prefetch" href="/assets/js/49.5848ada2.js"><link rel="prefetch" href="/assets/js/5.727b4c2b.js"><link rel="prefetch" href="/assets/js/50.4b04e653.js"><link rel="prefetch" href="/assets/js/51.a67d5108.js"><link rel="prefetch" href="/assets/js/52.233929c4.js"><link rel="prefetch" href="/assets/js/53.7c20b820.js"><link rel="prefetch" href="/assets/js/54.04dbce86.js"><link rel="prefetch" href="/assets/js/55.9c2ffed8.js"><link rel="prefetch" href="/assets/js/6.7bd8b00a.js"><link rel="prefetch" href="/assets/js/7.e7980bbd.js"><link rel="prefetch" href="/assets/js/8.e5b36337.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35c945c9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><!----> <div id="my-bg"></div> <header class="navbar my-nav"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.jpg" alt="Xerrors" class="logo"> <span class="site-name can-hide">Xerrors</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">📃 文章</a></div><div class="nav-item"><a href="/zhuanlan/" class="nav-link">📰 专栏</a></div><div class="nav-item"><a href="/zone/" class="nav-link">🤪 动态</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔨 工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">🚥 导航</a></li><li class="dropdown-item"><!----> <a href="/tools/findpwd.html" class="nav-link">🔐 寻密</a></li><li class="dropdown-item"><!----> <a href="/tools/links.html" class="nav-link">🔗 友链</a></li><li class="dropdown-item"><!----> <a href="https://www.notion.so/krance/7af4256cdc35438d919833f4c6192128?v=5219488bae934ab3a621e7c8b123d08b" target="_blank" rel="noopener noreferrer" class="nav-link external">
  👩‍🚀 Notion
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <a href="https://github.com/Xerrors/" target="_blank" class="can-hide" style="display: flex; align-items: center; margin-left: 10px;"><img src="/github.png" class="my-svg" style="width: 1.4rem; height: 1.4rem;"></a></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">📃 文章</a></div><div class="nav-item"><a href="/zhuanlan/" class="nav-link">📰 专栏</a></div><div class="nav-item"><a href="/zone/" class="nav-link">🤪 动态</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔨 工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">🚥 导航</a></li><li class="dropdown-item"><!----> <a href="/tools/findpwd.html" class="nav-link">🔐 寻密</a></li><li class="dropdown-item"><!----> <a href="/tools/links.html" class="nav-link">🔗 友链</a></li><li class="dropdown-item"><!----> <a href="https://www.notion.so/krance/7af4256cdc35438d919833f4c6192128?v=5219488bae934ab3a621e7c8b123d08b" target="_blank" rel="noopener noreferrer" class="nav-link external">
  👩‍🚀 Notion
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <!----> </aside> <div><div style="height:4.5rem;width:100%;background:#f0f2f5;"></div> <main class="page need-zoom"> <div class="my-main"><div class="my-main-left"><div class="my-title-box"><h3 style="text-align: center;">前端项目中所遇到的一些问题集合</h3> <div style="text-align: center; color: #655e5e; font-size: 14px;"><span data-flag-title="Your Article Title" class="leancloud-visitors"><span>2020-3-1  </span> <i class="el-icon-view" style="margin-right: 3px;"></i> <span class="leancloud-visitors-count"></span> <span>次浏览</span></span></div></div> <div class="theme-default-content content__default"><p>开发中会遇到的问题集合，有的比较高级，有的超级基础，全部记下来了。。说到底还是基础不扎实。我在每一个遇到的问题的解决方法旁边都放了帮助我解决问题的链接。希望也可以帮助到其他人。</p> <h2 id="vue-相关"><a href="#vue-相关" aria-hidden="true" class="header-anchor">#</a> Vue 相关</h2> <h3 id="_1-配置代理转发"><a href="#_1-配置代理转发" aria-hidden="true" class="header-anchor">#</a> 1. 配置代理转发</h3> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这个参数会在每次编译完成之后自动打开浏览器</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    host<span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
    port<span class="token punctuation">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
    https<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否支持 https</span>
    hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 热更新（似乎没有用）</span>
    <span class="token comment">/*
     * 以上的ip和端口是我们本机的;也就是配置之后你在浏览器里面所看到
     * 的目的 IP 地址以及端口是你的主机，也就是跨域转发的结果。
     */</span>
      
    <span class="token comment">// 下面为需要跨域的</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 配置跨域</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里后台的地址模拟的;应该填写你们真实的后台接口</span>
        target<span class="token punctuation">:</span> <span class="token string">'http://xxx.xxx.xxx.xxx/v2'</span><span class="token punctuation">,</span> 
        ws<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        changOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许跨域</span>
        pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">'^/api'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token comment">// 请求的时候使用这个api就可以</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>PS：这里有一个很大的缺点，当你的<code>api</code>或者其他的一些配置更改之后需要重新编译，我也不知道为什么，但是事实如此，折腾了很久才知道。</p> <blockquote><p>这个的参考源我之前保存的被我弄丢了，不过网上一搜一大堆，也就不存在侵不侵权了吧。</p></blockquote> <h3 id="_2-mount-时访问-vuex"><a href="#_2-mount-时访问-vuex" aria-hidden="true" class="header-anchor">#</a> 2. mount 时访问 Vuex</h3> <p>在使用<code>state</code>里面的数据的时候，无论是在 <code>data</code>里面使用，还是在<code>mounted</code>里面使用都会出现无法获取<code>state</code>里面数据的情况。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    form<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      avatar<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>avatar<span class="token punctuation">,</span>
      account<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      collection<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        way<span class="token punctuation">:</span> <span class="token string">'支付宝'</span><span class="token punctuation">,</span>
        account<span class="token punctuation">:</span> <span class="token string">'17685673489'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      tel<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tel
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'avatar'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'tel'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>avatar <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>avatar
  <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>account <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>name
  <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>tel <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>tel
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>导致最终渲染结果为空。</p> <h4 id="原因分析"><a href="#原因分析" aria-hidden="true" class="header-anchor">#</a> 原因分析</h4> <blockquote><p>参考：<a href="https://juejin.im/post/5923a3bf2f301e006b272bed" target="_blank" rel="noopener noreferrer">vuex中的state在组件中如何监听@掘金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>原因是因为 <code>vuex</code>中的<code>state</code>会在某一个组件中使用，而这个状态的初始化是通过异步加载完成的。组件在渲染过程中，获取的<code>state</code>状态为空。也就是说组件在异步完成之前就已经完成渲染了，导致组件的数据没有来得及渲染。</p></blockquote> <p>简单来说就是当<code>data</code>在渲染的时候，<code>state</code>还是空的，所以没法获得我们想要的值。</p> <h4 id="解决办法"><a href="#解决办法" aria-hidden="true" class="header-anchor">#</a> 解决办法</h4> <p>第一种解决办法，完美解决获取数据的问题。</p> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'avatar'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'tel'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">form</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      avatar<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>avatar<span class="token punctuation">,</span>
      account<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      collection<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        way<span class="token punctuation">:</span> <span class="token string">'支付宝'</span><span class="token punctuation">,</span>
        account<span class="token punctuation">:</span> <span class="token string">'17685673489'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      tel<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tel
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样虽然能够解决获取数据的问题，但是由于我的使用场景是作用与表单，需要可以修改；如果采用上面所述方法的话会导致表单里面的数据无法被修改，达不到我的目的。当然，对于只需要获取数据的情况这是一个很好的解决办法。</p> <p><s>第二种解决办法，我需要的方式是能够在页面加载完成之后获取一次数据，同时我后面还可以修改。好吧，我没找到好的办法，最后我采用的办法是使用<code>state</code>里面的数据显示在<code>input</code>上面的<code>placeholder</code>上面，完美解决问题。</s></p> <p>第二种办法就是使用计算属性的<code>get</code>和<code>set</code>方法：</p> <blockquote><p>参考官方示例：<a href="https://vuex.vuejs.org/zh/guide/forms.html#%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%E7%9A%84%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener noreferrer">双向绑定的计算属性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>说实话一年多没用这个属性我都给忘记了，但是我最终还是没有采用这个办法，因为我要修改的数据很多，是一个表单，所以我还是使用了调用后端接口来获得数据。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  message<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>message
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'updateMessage'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-在-js-文件中访问-vuex-的状态"><a href="#_3-在-js-文件中访问-vuex-的状态" aria-hidden="true" class="header-anchor">#</a> 3. 在 js 文件中访问 vuex 的状态</h3> <p>这一听就是基本功不扎实，碰到这种情况，第一时间就是去<a href="https://vuex.vuejs.org/zh/guide/" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，不过很遗憾，没找到。原本我记得是有的，可能官方更新给修改了（果然我还是太菜了），官网找不到那就Google呗，找到了。</p> <blockquote><p>参考：<a href="https://segmentfault.com/q/1010000018127421" target="_blank" rel="noopener noreferrer">怎么在单独的js文件中使用vuex?@segmentfault<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>从上面那个回答里面也能印证我的记忆是对的，之前的官方文档下面就是这个例子！！（果然还是我太菜了，官方都认为太简单给删掉了）</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// store.js</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 变更状态</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store

<span class="token comment">// a.js</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 1</span>
store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token comment">// 2</span>
</code></pre></div><p>这里需要注意的是那里的<code>'./store.js</code>是相对地址，要注意下自己的路径不要选错了'，另外如果是刚加载的时候，state里面还没有数据，如果直接调用可能会出现错误，需要进行判断是否为空之后再使用。</p> <h3 id="_4-el-upload-组件内的按钮强制为选择文件"><a href="#_4-el-upload-组件内的按钮强制为选择文件" aria-hidden="true" class="header-anchor">#</a> 4. el-upload 组件内的按钮强制为选择文件</h3> <h4 id="原因分析-2"><a href="#原因分析-2" aria-hidden="true" class="header-anchor">#</a> 原因分析</h4> <p>我需要实现的需求是这样的，一个上传身份证照片的表单项目：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">&quot;身份证照片&quot;</span> prop<span class="token operator">=</span><span class="token string">'ID_pics'</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>el<span class="token operator">-</span>upload
    action<span class="token operator">=</span><span class="token string">&quot;http://xxx.xxx.xxx.xxx/v2&quot;</span>
    <span class="token punctuation">:</span>auto<span class="token operator">-</span>upload<span class="token operator">=</span><span class="token string">&quot;false&quot;</span>
    <span class="token punctuation">:</span>limit<span class="token operator">=</span><span class="token string">&quot;3&quot;</span>
    <span class="token punctuation">:</span>on<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">&quot;handleChangeLicense&quot;</span>
    <span class="token punctuation">:</span>on<span class="token operator">-</span>exceed<span class="token operator">=</span><span class="token string">&quot;handleExceed&quot;</span>
    <span class="token punctuation">:</span>file<span class="token operator">-</span>list<span class="token operator">=</span><span class="token string">&quot;license&quot;</span>
    multiple<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>选择文件<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;uploadIDPic&quot;</span><span class="token operator">&gt;</span>点击上传<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">&quot;tip&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;el-upload__tip&quot;</span><span class="token operator">&gt;</span>身份证正面以及背面，只能上传jpg<span class="token operator">/</span>png文件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>upload<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
</code></pre></div><p>预期效果如下：</p> <p><img src="http://src.xerrors.fun/blog/20200301/bIiuGvvCuz9u.png" alt="预期效果"></p> <p>问题出现了！！！这个时候两个按钮点击之后都是选择打开文件。</p> <h4 id="解决办法-2"><a href="#解决办法-2" aria-hidden="true" class="header-anchor">#</a> 解决办法</h4> <blockquote><p>参考：<a href="https://element.eleme.cn/#/zh-CN/component/upload#slot" target="_blank" rel="noopener noreferrer">Element UI 官网 upload 组件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>这里是官方对于<code>upload</code>的两个插槽的介绍</p></blockquote> <p><strong>Slot</strong></p> <table><thead><tr><th style="text-align:left;">name</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>trigger</strong></td> <td style="text-align:left;">触发文件选择框的内容</td></tr> <tr><td style="text-align:left;">tip</td> <td style="text-align:left;">提示说明文字</td></tr></tbody></table> <p>所以我们的解决办法是在第一个上面添加一个插槽，也就是把两个按钮变成这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>el<span class="token operator">-</span>button slot<span class="token operator">=</span><span class="token string">&quot;trigger&quot;</span> size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>选择文件<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>el<span class="token operator">-</span>button
	size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span>
	style<span class="token operator">=</span><span class="token string">&quot;margin-left: 10px&quot;</span>
	type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
	@click<span class="token operator">=</span><span class="token string">&quot;uploadIDPic&quot;</span><span class="token operator">&gt;</span>
    点击上传
<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
</code></pre></div><p>不知道为什么，修改之后边距就消失了，所以需要指定一下。</p> <h3 id="_5-el-upload-上传-formdata-数据"><a href="#_5-el-upload-上传-formdata-数据" aria-hidden="true" class="header-anchor">#</a> 5. el-upload 上传 formData 数据</h3> <p>这里依然时使用上面的上传组件出现的问题，这里着重于说一点：后端要求的是把照片存成数组形式，但是我把数据传到后端之后，一直提示不是数组类型。接近于崩溃啊，期间查了各种资料，也让我对文件上传有了更加深刻的认识。</p> <p>这里推荐一个大佬的文章：</p> <p><a href="https://segmentfault.com/a/1190000015368701" target="_blank" rel="noopener noreferrer">使用ElementUI和Axios以formData格式提交带有文件的表单的错误示范及分析解决@segmentfault<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>如果你跟我一样需要手动上传并且要求类型是<code>formData</code>形式的话，看完上面那篇文章你基本上就算是解决问题。</p> <p>那么问题来了，既然上面的文章已经讲的那么清楚了，我的为啥还是有问题？？？问题的关键在于，文中举得例子是单个文件的情况，到了我这里是多个文件，这不就出问题了嘛！</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// template 部分</span>
<span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">&quot;营业执照&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;license&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>el<span class="token operator">-</span>upload
    action<span class="token operator">=</span><span class="token string">&quot;http://xxx.xxx.xxx.xxx/v2&quot;</span> <span class="token comment">// 手动上传，这里可空，但必须有</span>
    <span class="token punctuation">:</span>auto<span class="token operator">-</span>upload<span class="token operator">=</span><span class="token string">&quot;false&quot;</span>
    <span class="token punctuation">:</span>on<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">&quot;handleChangeLicense&quot;</span>
    <span class="token punctuation">:</span>file<span class="token operator">-</span>list<span class="token operator">=</span><span class="token string">&quot;licenses&quot;</span>
    multiple<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button slot<span class="token operator">=</span><span class="token string">&quot;trigger&quot;</span> size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>选择文件<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;margin-left: 10px&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;uploadLicense&quot;</span><span class="token operator">&gt;</span>点击上传<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>upload<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>

<span class="token comment">// javascript 部分</span>
<span class="token function">handleChangeLicense</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> filelist</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 注意这里是使用map得到文件里面的raw文件</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>license <span class="token operator">=</span> filelist<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i<span class="token punctuation">.</span>raw<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token function">uploadLicense</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 上传营业执照</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'imgs[]'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>license<span class="token punctuation">)</span> <span class="token comment">// imgs[] 后端就是这么命名的</span>
  formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'others'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>others<span class="token punctuation">)</span> <span class="token comment">// 其他参数，不是重点</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">uploadPics</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>上面的写法看似人畜无害，但是每次向后端同学发送请求都会得到<strong>无情的拒绝</strong>。</p> <h4 id="解决办法-3"><a href="#解决办法-3" aria-hidden="true" class="header-anchor">#</a> 解决办法</h4> <p>但是！！！后来我偶然的在<code>postman</code>生成的文档里面看到<code>fetch</code>的写法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> formdata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formdata<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;others&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formdata<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;imgs[]&quot;</span><span class="token punctuation">,</span> fileInput<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;/file1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formdata<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;imgs[]&quot;</span><span class="token punctuation">,</span> fileInput<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;/file2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>虽然我没学过<code>fetch</code>，但是我也好奇为什么两个文件要分两次放到<code>formdata</code>里面，所以我就抱着试一试的态度使用<code>for...of...</code>依次放进去。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 上下文同上</span>
<span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> file <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>license<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'imgs[]'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后就好了。。。。</p> <p>具体的原因我也找到了一个博客说的挺对的：</p> <blockquote><p>参考：<a href="">formData 添加数组@CSDN</a></p> <p>把数组直接append到FormData对象中，post的请求会把数组拼接成一个字符串发送给服务器，又不想在服务器端截取字符串。</p> <p>解决方案：遍历数组把数组项依次append添加到FormData对象，服务器端就可以获取数组了。</p></blockquote> <h4 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h4> <p>所以问题的关键就在于向<code>formdata</code>里面存放数组的时候要依次放进去。</p> <h2 id="基础问题"><a href="#基础问题" aria-hidden="true" class="header-anchor">#</a> 基础问题</h2> <h3 id="javascript-相关"><a href="#javascript-相关" aria-hidden="true" class="header-anchor">#</a> JavaScript 相关</h3> <p>很多时候就是记不住，还是保存一下方便以后来查</p> <h4 id="_1-如何遍历-js-对象"><a href="#_1-如何遍历-js-对象" aria-hidden="true" class="header-anchor">#</a> 1. 如何遍历 JS 对象</h4> <p>我有一个对象（其实我还真的有个对象👩），长这样：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;手机状态&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;正常进入桌面&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;无法开机或者进入桌面&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;全新未拆封&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;内存、存储容量&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;256G&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;128G&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;64G&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;32G&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;账号可否退出&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;可正常退出&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;不可退出&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;磨损程度&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;外壳无瑕疵&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;细微划痕无磕碰&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;磕碰掉漆、边框磨损&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;外壳裂缝、变形&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;屏幕磨损&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;完美使用无划痕&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;细微划痕&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;划伤、脱胶、小缺角&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;碎裂、边角破损&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;屏幕显示&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;完美无瑕疵&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;显示色差，或轻微泛黄/亮坏点&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;显示烧屏，或有透图/透字&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;显示漏液，或闪烁/横竖线/花屏&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;维修状况&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;无维修情况&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;屏幕维修&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;主板维修或功能故障&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;屏幕和主板皆有维修&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我还从来没写过这样的数据，但是既然有了也没办法啊，试着遍历一下呗！</p> <blockquote><p>摘自MDN</p> <p>下面的函数接受一个对象作为参数。被调用时迭代传入对象的所有可枚举属性然后返回一个所有属性名和其对应值的字符串。😄</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> prop <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;obj.&quot;</span> <span class="token operator">+</span> prop <span class="token operator">+</span> <span class="token string">&quot; = &quot;</span> <span class="token operator">+</span> obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Output:</span>
<span class="token comment">// &quot;obj.a = 1&quot;</span>
<span class="token comment">// &quot;obj.b = 2&quot;</span>
<span class="token comment">// &quot;obj.c = 3&quot;</span>
</code></pre></div><blockquote><p>摘自MDN，<a href="https://interactive-examples.mdn.mozilla.net/pages/js/object-entries.html" target="_blank" rel="noopener noreferrer">查看示例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>还可以使用<code>Object.entries()</code>方法返回一个给定对象自身可枚举属性的键值对数组，其排列与使用 <code>for...in</code>循环遍历该对象时返回的顺序一致（区别在于 for-in 循环也枚举原型链中的属性）</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> object1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token string">'somestring'</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// expected output:</span>
<span class="token comment">// &quot;a: somestring&quot;</span>
<span class="token comment">// &quot;b: 42&quot;</span>
<span class="token comment">// order is not guaranteed</span>
</code></pre></div><h2 id="环境配置问题"><a href="#环境配置问题" aria-hidden="true" class="header-anchor">#</a> 环境配置问题</h2> <h3 id="更新yarn时错误："><a href="#更新yarn时错误：" aria-hidden="true" class="header-anchor">#</a> 更新yarn时错误：</h3> <h4 id="问题描述"><a href="#问题描述" aria-hidden="true" class="header-anchor">#</a> 问题描述</h4> <div class="language-sh extra-class"><pre class="language-sh"><code>Err:6 https://dl.yarnpkg.com/debian stable InRelease
  The following signatures were invalid: EXPKEYSIG 23E7166788B63E1E Yarn Packaging <span class="token operator">&lt;</span>yarn@dan.cx<span class="token operator">&gt;</span>
Reading package lists<span class="token punctuation">..</span>. Done
W: An error occurred during the signature verification. The repository is not updated and the previous index files will be used. GPG error: https://dl.yarnpkg.com/debian stable InRelease: The following signatures were invalid: EXPKEYSIG 23E7166788B63E1E Yarn Packaging <span class="token operator">&lt;</span>yarn@dan.cx<span class="token operator">&gt;</span>
W: Failed to fetch https://dl.yarnpkg.com/debian/dists/stable/InRelease  The following signatures were invalid: EXPKEYSIG 23E7166788B63E1E Yarn Packaging <span class="token operator">&lt;</span>yarn@dan.cx<span class="token operator">&gt;</span>
W: Some index files failed to download. They have been ignored, or old ones used instead.
</code></pre></div><h4 id="错误原因"><a href="#错误原因" aria-hidden="true" class="header-anchor">#</a> 错误原因</h4> <p>是  GPG key 过期了，需要更新。</p> <h4 id="解决办法-4"><a href="#解决办法-4" aria-hidden="true" class="header-anchor">#</a> 解决办法</h4> <p>直接更新 GPG key：<code>curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -</code></p> <p>参考：<a href="https://www.reddit.com/r/pop_os/comments/f08aky/failed_to_fetch_updates/" target="_blank" rel="noopener noreferrer">Filed to fatch upgrades<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">修改于:</span> <span class="time">5/4/2020, 1:43:38 AM</span></div></footer> <!----> <div style="background:white;" data-v-6d2945c5><section class="page-edit" data-v-6d2945c5><span data-flag-title="Your Article Title" class="leancloud-visitors" data-v-6d2945c5><i class="el-icon-view" style="margin-right: 3px;" data-v-6d2945c5></i> <span class="leancloud-visitors-count" data-v-6d2945c5></span> <span data-v-6d2945c5>次浏览</span></span> <div id="vcomments" data-v-6d2945c5></div></section></div></div> <div class="my-menu"><div class="my-menu__item"><h4 style="margin-top: 0; color: #121314">目录</h4> <a href="/problems-and-solutions/#vue-相关" class="my-menu__lv2">Vue 相关</a><a href="/problems-and-solutions/#_1-配置代理转发" class="my-menu__lv3">1. 配置代理转发</a><a href="/problems-and-solutions/#_2-mount-时访问-vuex" class="my-menu__lv3">2. mount 时访问 Vuex</a><a href="/problems-and-solutions/#_3-在-js-文件中访问-vuex-的状态" class="my-menu__lv3">3. 在 js 文件中访问 vuex 的状态</a><a href="/problems-and-solutions/#_4-el-upload-组件内的按钮强制为选择文件" class="my-menu__lv3">4. el-upload 组件内的按钮强制为选择文件</a><a href="/problems-and-solutions/#_5-el-upload-上传-formdata-数据" class="my-menu__lv3">5. el-upload 上传 formData 数据</a><a href="/problems-and-solutions/#基础问题" class="my-menu__lv2">基础问题</a><a href="/problems-and-solutions/#javascript-相关" class="my-menu__lv3">JavaScript 相关</a><a href="/problems-and-solutions/#环境配置问题" class="my-menu__lv2">环境配置问题</a><a href="/problems-and-solutions/#更新yarn时错误：" class="my-menu__lv3">更新yarn时错误：</a></div></div></div> </main></div> <div class="footer">
    © 2019-2020 ❤️ Xerrors<br> <a href="http://www.beian.miit.gov.cn" target="_blank">皖 ICP 备 19016269 号</a><br> <a href="https://me.csdn.net/jaykm" target="_blank">CSND</a>    
    <a href="https://github.com/Xerrors" target="_blank">GitHub</a>   
    <a href="https://juejin.im/user/5c17f022f265da616c65862f" target="_blank">掘金</a></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.56a758de.js" defer></script><script src="/assets/js/9.6ec67018.js" defer></script><script src="/assets/js/37.224258d1.js" defer></script>
  </body>
</html>
