<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ‰‹åŠ¨æ„é€ è¯æ³•åˆ†æå™¨ | Yuchuan</title>
    <meta name="description" content="Yuchuan playground">
    <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.3663fa43.css" as="style"><link rel="preload" href="/assets/js/app.e0933429.js" as="script"><link rel="preload" href="/assets/js/6.e75854f7.js" as="script"><link rel="preload" href="/assets/js/23.8ac8a227.js" as="script"><link rel="prefetch" href="/assets/js/1.b0b7e0e6.js"><link rel="prefetch" href="/assets/js/10.556efb44.js"><link rel="prefetch" href="/assets/js/11.2089c3e7.js"><link rel="prefetch" href="/assets/js/12.ecb05657.js"><link rel="prefetch" href="/assets/js/13.f3f171ac.js"><link rel="prefetch" href="/assets/js/14.7ab2ed98.js"><link rel="prefetch" href="/assets/js/15.da53fe2e.js"><link rel="prefetch" href="/assets/js/16.ed5d0f76.js"><link rel="prefetch" href="/assets/js/17.19077e86.js"><link rel="prefetch" href="/assets/js/18.18b6aa3e.js"><link rel="prefetch" href="/assets/js/19.811981b5.js"><link rel="prefetch" href="/assets/js/2.306aebd2.js"><link rel="prefetch" href="/assets/js/20.8a9daebc.js"><link rel="prefetch" href="/assets/js/21.ca51d6bd.js"><link rel="prefetch" href="/assets/js/22.3096d9c2.js"><link rel="prefetch" href="/assets/js/24.7fac8653.js"><link rel="prefetch" href="/assets/js/25.61ce91f2.js"><link rel="prefetch" href="/assets/js/26.b2d821bb.js"><link rel="prefetch" href="/assets/js/27.b213489f.js"><link rel="prefetch" href="/assets/js/28.b0bb6805.js"><link rel="prefetch" href="/assets/js/29.9da93297.js"><link rel="prefetch" href="/assets/js/30.a941c1e7.js"><link rel="prefetch" href="/assets/js/31.865020c8.js"><link rel="prefetch" href="/assets/js/32.b952a207.js"><link rel="prefetch" href="/assets/js/33.fdb0c618.js"><link rel="prefetch" href="/assets/js/34.e784f5e2.js"><link rel="prefetch" href="/assets/js/35.5e8730a8.js"><link rel="prefetch" href="/assets/js/36.29b1c314.js"><link rel="prefetch" href="/assets/js/37.d664dac9.js"><link rel="prefetch" href="/assets/js/38.e5cf901f.js"><link rel="prefetch" href="/assets/js/39.2f61b2dc.js"><link rel="prefetch" href="/assets/js/4.5f484ea7.js"><link rel="prefetch" href="/assets/js/40.ccf88fa2.js"><link rel="prefetch" href="/assets/js/41.4684b485.js"><link rel="prefetch" href="/assets/js/42.5dc549ab.js"><link rel="prefetch" href="/assets/js/5.eed0e3da.js"><link rel="prefetch" href="/assets/js/7.c8f17c84.js"><link rel="prefetch" href="/assets/js/8.74324478.js"><link rel="prefetch" href="/assets/js/9.bc096069.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3663fa43.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><!----> <div id="my-bg"></div> <header class="navbar my-nav"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.jpg" alt="Yuchuan" class="logo"> <span class="site-name can-hide">Yuchuan</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">ğŸ“ƒ æ–‡ç« </a></div><div class="nav-item"><a href="/zhuanlan/" class="nav-link">ğŸ“° ä¸“æ </a></div><div class="nav-item"><a href="/music/" class="nav-link">ğŸµ éŸ³ä¹</a></div><div class="nav-item"><a href="/zone/" class="nav-link">ğŸ¤ª åŠ¨æ€</a></div><div class="nav-item"><a href="/guide/" class="nav-link">ğŸš¥ å¯¼èˆª</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ğŸ”¨ å·¥å…·</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/findpwd.html" class="nav-link">ğŸ” å¯»å¯†</a></li><li class="dropdown-item"><!----> <a href="/about/links.html" class="nav-link">ğŸ”— å‹é“¾</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">ğŸ“ƒ æ–‡ç« </a></div><div class="nav-item"><a href="/zhuanlan/" class="nav-link">ğŸ“° ä¸“æ </a></div><div class="nav-item"><a href="/music/" class="nav-link">ğŸµ éŸ³ä¹</a></div><div class="nav-item"><a href="/zone/" class="nav-link">ğŸ¤ª åŠ¨æ€</a></div><div class="nav-item"><a href="/guide/" class="nav-link">ğŸš¥ å¯¼èˆª</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ğŸ”¨ å·¥å…·</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/findpwd.html" class="nav-link">ğŸ” å¯»å¯†</a></li><li class="dropdown-item"><!----> <a href="/about/links.html" class="nav-link">ğŸ”— å‹é“¾</a></li></ul></div></div> <!----></nav>  <!----> </aside> <div><div style="height:4.5rem;width:100%;background:#f0f2f5;"></div> <main class="page"> <div class="my-main"><div class="my-main-left"><div class="my-title-box"><h3 style="text-align: center;">æ‰‹åŠ¨æ„é€ è¯æ³•åˆ†æå™¨</h3> <div style="text-align: center; color: #aaa">
          å‘å¸ƒäºï¼š2020-01-07T15:17:52.000Z
        </div></div> <div class="theme-default-content content__default"><p>é€šè¿‡è®¾è®¡cè¯­è¨€å¸¸è§å•è¯çš„æ­£è§„æ–‡æ³•æˆ–æ­£è§„å¼ï¼Œè€Œåå¾—åˆ°NFAï¼Œå†ç¡®å®šåŒ–å¾—åˆ°DFAï¼Œæ ¹æ®DFAçš„è½¬æ¢çŸ©é˜µæˆ–è½¬æ¢å›¾ï¼Œç”¨c++è¯­è¨€å®ç°è¯æ³•åˆ†æå™¨ã€‚</p> <h2 id="é¢˜ç›®åˆ†æ"><a href="#é¢˜ç›®åˆ†æ" aria-hidden="true" class="header-anchor">#</a> é¢˜ç›®åˆ†æ</h2> <p>æˆ‘ä»¬è¿™æ¬¡çš„ç›®æ ‡å°±æ˜¯å®ç°è·Ÿä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ ·çš„è¯æ³•åˆ†æå™¨çš„æ•ˆæœï¼Œåªä¸è¿‡è¿™ä¸€æ¬¡æˆ‘ä»¬æ˜¯è‡ªå·±ç¼–ç¨‹æ¥å®ç°è¿™ä¸€è¿‡ç¨‹ï¼Œéš¾åº¦ç¨å¾®åŠ å¤§äº†ä¸€ç‚¹ç‚¹ã€‚ä¸è¿‡è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œç°åœ¨å°±ä¸€æ­¥æ­¥å‰–æè¦åšçš„äº‹æƒ…ã€‚éœ€è¦è¯†åˆ«çš„å…³é”®å­—åŒ…æ‹¬void, int, main, double, return, float, if, else, do, while, for, scanf, printf, char, sqrt, abs, è¿ç®—ç¬¦(ç®—æœ¯ã€å…³ç³»ã€é€»è¾‘ã€ä½)ï¼›éœ€è¦è¯†åˆ«çš„å…¶ä»–å•è¯æœ‰æ ‡è¯†ç¬¦, æ•´æ•°ï¼ˆåè¿›åˆ¶å½¢å¼ã€æŒ‡æ•°å½¢å¼ï¼‰ï¼Œå®æ•°ï¼ˆåè¿›åˆ¶å½¢å¼ã€æŒ‡æ•°å½¢å¼ï¼‰ï¼Œå­—ç¬¦ä¸²ï¼›è¿‡æ»¤æ³¨é‡ŠåŠç©ºæ ¼ã€‚</p> <h3 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" aria-hidden="true" class="header-anchor">#</a> æ€è·¯åˆ†æ</h3> <p>æƒ³ä¸€æƒ³è¯æ³•åˆ†æå™¨çš„è¿‡ç¨‹ï¼Œå…¶å®å®è´¨ä¸Šä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦çš„è¯†åˆ«ï¼Œç¢°åˆ°å¯è¯†åˆ«çš„å•è¯å¹¶ä¸”æ²¡æ³•ç»§ç»­å¾€ä¸‹èµ°çš„æ—¶å€™å°±æ˜¯è¯†åˆ«åˆ°äº†ä¸€ä¸ªå•è¯ï¼Œä¹‹åä»å¤´å¼€å§‹è¯†åˆ«ï¼›å°±åƒä¸‹é¢è¿™ä¸ªå›¾ç‰‡é‡Œé¢çš„ä¸€æ ·ï¼›æœ‰äº†è¿™ä¸ªå›¾ä¹Ÿå°±æ˜¯æœ‰äº†æˆ‘ä»¬ä»Šå¤©å†™ä»£ç çš„æ€è·¯ã€‚</p> <p><img src="http://src.xerrors.fun/blog/20200107/WmmMhCciST3m.jpg?imageslim" alt="mark"></p> <p>æˆ‘ä»¬éœ€è¦è¯†åˆ«çš„ç±»å‹æœ‰ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>static string keywords[12] = {&quot;scanf&quot;,&quot;printf&quot;,&quot;if&quot;,&quot;else&quot;,&quot;for&quot;,&quot;while&quot;,&quot;return&quot;,&quot;do&quot;,&quot;main&quot;,&quot;abs&quot;,&quot;sqrt&quot;,&quot;float&quot;};
static string type[8] = {&quot;int&quot;,&quot;double&quot;,&quot;void&quot;,&quot;short&quot;,&quot;char&quot;,&quot;long&quot;,&quot;unsigned int&quot;};
</code></pre></div><h3 id="å®ç°æ–¹æ³•"><a href="#å®ç°æ–¹æ³•" aria-hidden="true" class="header-anchor">#</a> å®ç°æ–¹æ³•</h3> <p>å› ä¸ºéœ€è¦ C++ è¯­è¨€æ¥ç¼–å†™ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆä»£ç ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ æ–¹ä¾¿æˆ‘ä»¬åæ¥çš„ä½¿ç”¨ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å®Œæˆçš„æ–¹æ³•æœ‰ï¼š</p> <ul><li>scan æ‰«æçš„å‡½æ•°ï¼šå¯¹æ•´ä¸ªè¾“å…¥æ–‡ä»¶è¿›è¡Œæ‰«æ</li> <li>print è¾“å‡ºçš„å‡½æ•°ï¼šåœ¨æ‰«æç»“æŸä¹‹åè¾“å‡ºç»“æœä¿¡æ¯</li> <li>isKeyWord ç­‰åˆ¤æ–­å‡½æ•°ï¼šå¯¹å•è¯ç±»å‹çš„åˆ¤æ–­ï¼Œå¯èƒ½ç»å¸¸ç”¨åˆ°ï¼Œå°è£…ä¸€ä¸‹</li></ul> <p>å±æ€§éœ€è¦ï¼š</p> <ul><li>word å­˜æ”¾æ„æˆå•è¯çš„å­—ç¬¦ä¸²</li> <li>line è®°å½•è¡Œå·</li> <li>ch å­˜æ”¾æ¯æ¬¡è¯»å…¥çš„å­—ç¬¦</li> <li>msg å­˜æ”¾æ¶ˆæ¯çš„é“¾è¡¨</li></ul> <p>è§£é‡Šä¸€ä¸‹ï¼šword æ˜¯å¹²å˜›çš„ï¼Ÿå½“ç¨‹åºæ‰§è¡Œçš„æ—¶å€™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦è¿›è¡Œè¯†åˆ«çš„ï¼Œæ‰€ä»¥åœ¨è¯†åˆ«ç»“æŸä¹‹å‰ï¼Œä¼šæŠŠå­—ç¬¦ä¸²å…ˆå­˜èµ·æ¥ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨è¯†åˆ«å­—ç¬¦ <code>main</code> çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯»å–åˆ°äº†å­—ç¬¦ <code>i</code>ï¼Œæ­¤æ—¶ <code>word</code> çš„å€¼å°±æ˜¯ <code>mai</code>ï¼›</p> <p>å…³äºæ¶ˆæ¯ï¼Œè·Ÿä¹‹å‰çš„æ–¹æ³•ä¸€æ ·æ˜¯æŠŠæ¶ˆæ¯ä¸€æ¡ä¸€æ¡æ”¾åœ¨é“¾è¡¨é‡Œé¢ï¼Œä¸ºäº†èƒ½è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œæ‰€ä»¥æœ€åå†è¾“å‡ºã€‚å› ä¸ºæ¯ä¸ªæ¶ˆæ¯éƒ½è¦è¾“å‡ºæ‰€è¯†åˆ«çš„å•è¯çš„è¡Œå·ï¼Œç±»å‹ï¼Œå€¼ï¼ŒåŒæ—¶èŠ‚ç‚¹ä¸­è¿˜è¦åŒ…æ‹¬åé¢èŠ‚ç‚¹çš„åœ°å€ï¼Œæ‰€ä»¥æ¶ˆæ¯çš„ç»“æ„ä½“å¦‚ä¸‹ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>struct Msg {
  int line;
  string token;
  string word;
  Msg* next = nullptr;
};
</code></pre></div><p>ç±»çš„æ„é€ å¦‚ä¸‹ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>class LA {
private:
    string word; //å­˜æ”¾æ„æˆå•è¯çš„å­—ç¬¦ä¸²
    int line; //è®°å½•è¡Œæ•°
    char ch; //å­˜æ”¾æ¯æ¬¡è¯»å…¥çš„å­—ç¬¦
    Msg *m; // æŒ‡é’ˆï¼Œåé¢ä¼šè¯¦ç»†è¯´
    Msg *p; // æŒ‡é’ˆï¼Œåé¢ä¼šè¯¦ç»†è¯´
public:
    void show(string s); // åé¢è¯¦ç»†è¯´
    LA();
    void scan();
    void print();
    void recoNum();   // å½“è¯†åˆ«çš„æ˜¯æ•°å­—æ—¶
    void recoFloat(); // å½“è¯†åˆ«çš„æ˜¯æµ®ç‚¹æ•°æ—¶
    bool isKeyWord();   // åˆ¤æ–­æ˜¯å¦æ˜¯å…³é”®å­—
    bool isType();      // åˆ¤æ–­æ˜¯å¦æ˜¯ç±»å‹
};
</code></pre></div><h2 id="ä¸Šæ‰‹å®è·µ"><a href="#ä¸Šæ‰‹å®è·µ" aria-hidden="true" class="header-anchor">#</a> ä¸Šæ‰‹å®è·µ</h2> <p>æœ‰äº†ä¸Šé¢çš„å®šä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹å†™æˆ‘ä»¬çš„ä»£ç äº†ï¼Œä¸Šé¢çš„æ‹¼æ‹¼å‡‘å‡‘ä¹Ÿå°±æ˜¯ä¸€ä¸ªåˆçº§çŠ¶æ€å‡ºç°äº†ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>#include &lt;cctype&gt;
#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;

using namespace std;

//ä¿ç•™å­—æ•°ç»„
static string keywords[12] = {&quot;scanf&quot;,&quot;printf&quot;,&quot;if&quot;,&quot;else&quot;,&quot;for&quot;,&quot;while&quot;,&quot;return&quot;,&quot;do&quot;,&quot;main&quot;,&quot;abs&quot;,&quot;sqrt&quot;,&quot;float&quot;};
static string type[8] = {&quot;int&quot;,&quot;double&quot;,&quot;void&quot;,&quot;short&quot;,&quot;char&quot;,&quot;long&quot;,&quot;unsigned int&quot;};

struct Msg {
  int line;
  string token;
  string word;
  Msg* next = nullptr;
};

class LA {
private:
    string word; //å­˜æ”¾æ„æˆå•è¯çš„å­—ç¬¦ä¸²
    int line; //è®°å½•è¡Œæ•°
    char ch; //å­˜æ”¾æ¯æ¬¡è¯»å…¥çš„å­—ç¬¦
    Msg *m;
    Msg *p;
public:
    void show(string s); // åé¢ä¼šä»‹ç»
    LA();
    void scan();
    void print();
    void recoNum();
    void recoFloat();
    bool isKeyWord();
    bool isType();
};

int main() {
    LA l;
    l.scan();
    l.print();
    return 0;
}
</code></pre></div><p>main å‡½æ•°é‡Œé¢å†…å®¹ä¸å¤šï¼Œé¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œç„¶åæ‰«æï¼Œç„¶åè¾“å‡ºç»“æŸï¼Œå¾ˆç®€å•å¯¹å§ï¼Œä½†æ˜¯ï¼Œï¼Œæ€ä¹ˆå®ç°è¿™ä¸ªç±»ä»¥åŠé‡Œé¢çš„æ–¹æ³•å‘¢ï¼Ÿé‚£å°±ç»§ç»­å¾€ä¸‹é¢çœ‹å§ï¼è¿™ä¸ªæ–‡ä»¶å¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä¸ª<code>.h</code>æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨<code>c++</code>æ–‡ä»¶é‡Œé¢ï¼Œæˆ‘å›¾ä¸ªæ–¹ä¾¿ï¼Œåæ­£é¡¹ç›®ä¹Ÿä¸å¤§ï¼Œå°±æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢äº†ï¼Œä¸è¿‡é¡¹ç›®æ¯”è¾ƒå¤§çš„è¯ï¼Œä¸€å®šè¦å…»æˆæ–‡ä»¶åˆ†å¼€å­˜æ”¾çš„å¥½ä¹ æƒ¯ï¼</p> <h3 id="åˆå§‹åŒ–ç±»"><a href="#åˆå§‹åŒ–ç±»" aria-hidden="true" class="header-anchor">#</a> åˆå§‹åŒ–ç±»</h3> <p>å…ˆæ¥ä¸ªç®€å•çš„ï¼Œåˆå§‹åŒ–ç±»çš„æ—¶å€™ä¹Ÿå°±æ˜¯æŠŠæˆ‘ä»¬çš„å±æ€§éƒ½ç»™åˆå§‹åŒ–ä¸€ä¸‹ï¼Œç›´æ¥çœ‹ä»£ç å§ï¼Œä¸€çœ‹å°±æ‡‚ï¼›</p> <div class="language-c++ extra-class"><pre class="language-text"><code>LA::LA():line(1), ch('\0') {
    m = new Msg;
    p = m;
}
</code></pre></div><p>ä¸Šé¢çœ‹æ‡‚äº†çš„è¯å¯ä»¥è·³è¿‡æ­¤å¤„ï¼åˆå§‹åŒ–è¡Œå·ä¸º <code>1</code>ï¼Œ<code>ch</code> ä¸º <code>0</code>ï¼›åŒæ—¶åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯åˆ—è¡¨ï¼Œ<code>m</code> æ˜¯æ¶ˆæ¯é“¾è¡¨çš„å¤´ï¼Œ<code>p</code> æŒ‡é’ˆæŒ‡å‘é¦–åœ°å€ï¼›ï¼ˆå¦‚æœçœ‹ä¸å¤ªæ‡‚ï¼Œå¤ä¹ ä¸‹ã€Šæ•°æ®ç»“æ„ã€‹å’¯~ï¼‰</p> <h3 id="æ ‡è¯†ç¬¦åˆ¤æ–­"><a href="#æ ‡è¯†ç¬¦åˆ¤æ–­" aria-hidden="true" class="header-anchor">#</a> æ ‡è¯†ç¬¦åˆ¤æ–­</h3> <p>ä»ä¸Šé¢çš„é‚£ä¸ªå›¾ç‰‡é‡Œé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ ‡è¯†ç¬¦å’Œä¿ç•™å­—çš„è¯†åˆ«æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬é¢å¤–è¯†åˆ«ä¸€ä¸‹ï¼ŒåŠæ³•ä¹Ÿåªæœ‰ä¸€ä¸ªï¼šä¸€ä¸ªä¸€ä¸ªçš„æ¯”è¾ƒï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘è¿™ä¸ªç¹ççš„å·¥ä½œï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªåŠŸèƒ½å°è£…æˆå‡½æ•°ï¼Œåˆæ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œåˆ«æ‹…å¿ƒï¼Œå¥½æˆéƒ½åœ¨åå¤´å‘¢ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>bool LA::isKeyWord() {
    for(int i = 0; i &lt; 12; i++){
        if(word == keywords[i])
            return true;
    }
    return false;
}

bool LA::isType() {
    for(int i = 0; i &lt; 8; i++){
        if(word == type[i])
            return true;
    }
    return false;
}
</code></pre></div><h3 id="æ‰«æå‡½æ•°"><a href="#æ‰«æå‡½æ•°" aria-hidden="true" class="header-anchor">#</a> æ‰«æå‡½æ•°</h3> <h4 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" aria-hidden="true" class="header-anchor">#</a> å®ç°æ€è·¯</h4> <p>è¿™é‡ŒæŠŠæ‰«æçš„æ€è·¯è¯´ä¸€ä¸‹ï¼Œå…¶å®åŸç†éå¸¸çš„ç®€å•ï¼šå¯¹ç…§ä¸Šé¢çš„é‚£ä¸ªå›¾ç‰‡ï¼ˆç®—äº†æˆ‘è¿˜æ˜¯æ‹¿ä¸‹æ¥å§ï¼Œæ–¹ä¾¿å¯¹ç…§ï¼Œåœ¨ä¸‹é¢ï¼‰é€šè¿‡<code>getchar()</code>æ¥è·å–ä¸‹ä¸€ä¸ªè¦è¯†åˆ«çš„å­—ç¬¦ï¼Œæ¯”å¦‚æˆ‘ä»¬è¯»å–çš„å­—ç¬¦æ˜¯<code>&lt;</code>ï¼Œé‚£æˆ‘ä»¬ä¸‹ä¸€æ­¥å°±åˆ¤æ–­è¯†åˆ«åˆ°çš„æ˜¯ä¸æ˜¯<code>=</code>ï¼Œå¦‚æœæ˜¯ç­‰äºå·ï¼Œæˆ‘ä»¬å°±è¯†åˆ«æˆåŠŸä¸º<code>&lt;=</code>ï¼Œå¦‚æœä¸æ˜¯ç­‰äºå·ï¼Œé‚£å°±è¯†åˆ«ä¸º<code>&lt;</code>ï¼›ä¹‹åè¯»å–ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œé‡æ–°å¾ªç¯ï¼Œç›´åˆ°è¯†åˆ«åˆ°ç»“å°¾ <code>EOF</code>ä¸ºæ­¢ï¼›</p> <blockquote><p>EOF ï¼ˆEnd Of Fileï¼‰è¡¨ç¤ºæ–‡ä»¶çš„ç»“æŸå­—ç¬¦ï¼Œå½“è¯†åˆ«åˆ°EOFçš„æ—¶å€™ä¹Ÿå°±ä»£è¡¨æ–‡æ¡£è¯†åˆ«ç»“æŸï¼ŒEOFåœ¨è®¡ç®—æœºä¸­å€¼æ˜¯ -1</p></blockquote> <p><img src="http://src.xerrors.fun/blog/20200107/WmmMhCciST3m.jpg?imageslim" alt="mark"></p> <p>æ‰€ä»¥ï¼Œç”±æ­¤å¯è§ï¼Œæˆ‘ä»¬çš„<code>scan</code>å‡½æ•°çš„ä¸»ä½“å°±æ˜¯ä¸€ä¸ª <code>while</code>å¾ªç¯å’Œä¸€å¤§å †<code>if</code>åˆ¤æ–­äº†ï¼›</p> <h4 id="show-å‡½æ•°ï¼"><a href="#show-å‡½æ•°ï¼" aria-hidden="true" class="header-anchor">#</a> show() å‡½æ•°ï¼</h4> <p>ä»ä¸Šé¢çš„æ€è·¯ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬è¯†åˆ«åˆ°ä¸€ä¸ªå•è¯çš„æ—¶å€™éœ€è¦åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªæ¶ˆæ¯èŠ‚ç‚¹ï¼ŒæŠŠå•è¯ã€è¡Œå·ã€ç±»å‹ç­‰æ”¾è¿›å»ï¼Œç„¶åæŠŠwordæ¸…ç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯æŠŠè¿™äº›çç¢çš„äº‹æƒ…å°è£…èµ·æ¥å§ï¼</p> <div class="language-c++ extra-class"><pre class="language-text"><code>void LA::show(string s) {
    Msg* tmp = new Msg;
    tmp-&gt;line = line;	// è¡Œå·
    tmp-&gt;token = s;		// ç±»å‹ï¼›å¦‚ KeyWord
    tmp-&gt;word = word;	// å•è¯
    p-&gt;next = tmp;
    p = p-&gt;next;
    word.clear();
} 
</code></pre></div><p>ç”±äº <code>line word</code>æ˜¯LAç±»çš„å±æ€§ï¼Œæ‰€ä»¥å°±åªéœ€è¦ä¼ å…¥ä¸€ä¸ªç±»å‹ï½“å°±è¡Œï¼›</p> <h4 id="å¤§è‡´æ¡†æ¶"><a href="#å¤§è‡´æ¡†æ¶" aria-hidden="true" class="header-anchor">#</a> å¤§è‡´æ¡†æ¶</h4> <p>å› ä¸ºè¿™ä¸ªå‡½æ•°å®åœ¨æ˜¯å¤ªå¤ªå¤ªå¤ªå¤ªå¤ªé•¿äº†ï¼Œè¿˜æ˜¯å…ˆæŠŠæ¡†æ¶æ¥äº†è§£ä¸€ä¸‹ï¼Œå¾ˆå¥½ç†è§£ï¼Œå‰é¢çš„éƒ¨åˆ†æ˜¯æŠŠç©ºæ ¼æˆ–è€…å…¶ä»–çš„æ— å…³çš„å­—ç¬¦è¿‡æ»¤æ‰ï¼›ä¹‹åä¼šå¯¹æ¯ä¸€ä¸ªéƒ¨åˆ†è¿›è¡Œè¯¦ç»†è¯¦ç»†çš„è¯´æ˜ï¼</p> <div class="language-c++ extra-class"><pre class="language-text"><code>void LA::scan() {
    char tmp;
    //è¯»å–ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦
    do{
        ch = getchar();
        if(ch == 10)
            line++;
    } while(ch == ' ' || ch == 10);

    while(ch != '\0' &amp;&amp; ch != EOF){
        while(ch == ' ' || ch == 10){ // 10 è¡¨ç¤º'\n'
            if(ch == 10)
                line++;
            ch = getchar();
        }

        //å¤„ç† keyword type identify
        if(ch == '_' || isalpha(ch)){
            xxxx
        }

        // å¤„ç†å¸¦æ­£è´Ÿå·
        if (ch == '+' || ch == '-') {
            xxxx
        }
        
		// å¤„ç†ä¸€èˆ¬çš„æ•°å­—
        if (ch &gt;= '1' &amp;&amp; ch &lt;= '9') {
            recoNum();
        }
        
        // å¤„ç†æ³¨é‡Š
        if (ch == '/') {
            xxxx
        }

        //å¤„ç†ç¬¦å·
        switch(ch){
            xxxx
        }
    }
}
</code></pre></div><h4 id="å¤„ç†æ ‡è¯†ç¬¦ã€å…³é”®å­—ã€ç±»å‹"><a href="#å¤„ç†æ ‡è¯†ç¬¦ã€å…³é”®å­—ã€ç±»å‹" aria-hidden="true" class="header-anchor">#</a> å¤„ç†æ ‡è¯†ç¬¦ã€å…³é”®å­—ã€ç±»å‹</h4> <p>å…³äºæ ‡è¯†ç¬¦çš„ç‰¹ç‚¹å¤§å®¶ä¸€å®šéƒ½çŸ¥é“ï¼Œå¼€å¤´ä¸ºä¸‹åˆ’çº¿æˆ–è€…æ˜¯å­—æ¯ï¼Œåé¢å¯ä»¥è·Ÿä¸‹åˆ’çº¿ã€å­—æ¯å’Œæ•°å­—ï¼›è¯†åˆ«åˆ°ä¸€ä¸ªæ ‡è¯†ç¬¦ä¹‹åè¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯å…³é”®å­—æˆ–è€…ç±»å‹ï¼Œæ‰€ä»¥å°±æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>//å¤„ç† keyword type identify
if(ch == '_' || isalpha(ch)){
    word += ch;
    ch = getchar();
    while(isalnum(ch) || ch == '_'){ // isalnum() åˆ¤æ–­æ˜¯å¦æ˜¯å­—æ¯æˆ–æ•°å­—
        word += ch;
        ch = getchar();
    }

    if (isKeyWord())
        show(&quot;keyword&quot;);
    else if (isType())
        show(&quot;type&quot;);
    else
        show(&quot;identify&quot;);
}
</code></pre></div><h4 id="å¤„ç†æ­£è´Ÿå·"><a href="#å¤„ç†æ­£è´Ÿå·" aria-hidden="true" class="header-anchor">#</a> å¤„ç†æ­£è´Ÿå·</h4> <p>è¿™ä¸ªè¿˜æ˜¯æœ‰ç‚¹æ£˜æ‰‹çš„ï¼Œä¸ºå•¥å‘¢ï¼Ÿé¦–å…ˆ <code>+ -</code>å¯ä»¥å‡ºç°åœ¨æ•°å­—çš„å‰é¢ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºå•ç‹¬çš„è¿ç®—ç¬¦ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è·Ÿç­‰äºå·ä¸€èµ·è¡¨ç¤ºä¸€ä¸ªè¿ç®—ç¬¦ï¼›ä½†æ˜¯ç”±äºå¯¹äºæ•°å­—çš„å¤„ç†æ¯”è¾ƒéº»çƒ¦ä¸”åé¢ä¹Ÿä¼šç”¨åˆ°ï¼Œæ‰€ä»¥å°±å°è£…æˆä¸€ä¸ªå‡½æ•°<code>recoNum()</code>äº†ï¼ˆæ”¾åœ¨åé¢è®²ï¼‰ã€‚åˆ†å¼€ä¹‹åï¼Œéš¾åº¦å°±å¤§å¤§é™ä½äº†ã€‚</p> <div class="language-c++ extra-class"><pre class="language-text"><code>// å¤„ç† integer
if (ch == '+' || ch == '-') {
    word += ch; ch = getchar(); // åˆ¤æ–­ä¸‹ä¸€ä¸ªå­—ç¬¦
    if(ch == '='){
        // æ“ä½œç¬¦
        word += ch; ch = getchar();
        show(&quot;OPT&quot;);
    } else if (ch == '0') {
        // å› ä¸º Â±0 ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„ä¸”åé¢ä¸èƒ½è·Ÿæ•°å­—ï¼Œæ‰€ä»¥è¯†åˆ«ç»“æŸ
        word += ch; ch = getchar();
        show(&quot;integer&quot;);
    } else if (ch &gt;= '1' &amp;&amp; ch &lt;= '9') {
        // å¯èƒ½æ˜¯ä¸ªæ•°å­—
        recoNum();
    } else {
        // æ“ä½œç¬¦
        show(&quot;OPT&quot;);
    }
}
</code></pre></div><h4 id="å¤„ç†æ•°å­—"><a href="#å¤„ç†æ•°å­—" aria-hidden="true" class="header-anchor">#</a> å¤„ç†æ•°å­—</h4> <p>è¶…çº§ç®€å•ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>if (ch &gt;= '1' &amp;&amp; ch &lt;= '9') {
    recoNum();
}
</code></pre></div><p>å“ˆå“ˆå“ˆå“ˆï¼Œå› ä¸ºéš¾çš„åœ¨åé¢ï¼Œä¸‹é¢å°±çœ‹ä¸€ä¸‹ï¼Œ<code>recoNum()</code>çš„å®ç°æ–¹æ³•ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>void LA::recoNum() {
    word += ch; ch = getchar();	// è¯»å–ä¸‹ä¸€ä¸ªå­—ç¬¦
    while (isdigit(ch)) {
        word += ch; ch = getchar();
    }

    // å¤„ç† decimal
    if (ch == '.') {
        word += ch; ch = getchar();
        if (!isdigit(ch)) {
            // æ­¤å¤„åº”è¯¥æŠ¥é”™ï¼
            word.clear();
        } else {
            while (isdigit(ch)) {
                word += ch; ch = getchar();
            }
            if (ch == 'e') {
                recoFloat();
            } else {
                show(&quot;decimal&quot;);
            }
        }
    }
    // å¤„ç† float
    else if (ch == 'e') {
        recoFloat();
    }
    else {
        show(&quot;integer&quot;);
    }
}
</code></pre></div><p>ä¸Šé¢çš„ä»£ç åˆå‡ºç°äº†ä¸€ä¸ªæ–°çš„å‡½æ•°<code>recoFloat()</code>çœ‹åå­—å°±çŸ¥é“ï¼Œæ˜¯ç”¨æ¥è¯†åˆ«å¸¦æŒ‡æ•°çš„æµ®ç‚¹æ•°çš„ï¼Œåé¢æ…¢æ…¢ä»‹ç»ï¼Œå…ˆæŠŠæ€è·¯ææ‡‚ï¼›è™½ç„¶çœ‹ç€ç¹çäº†ä¸€ç‚¹ï¼Œä½†æ˜¯è¿˜æ˜¯é€»è¾‘æ¸…æ™°ï¼Œå¾ˆå¥½ç†è§£çš„ï¼›</p> <h4 id="è¯†åˆ«æµ®ç‚¹æ•°"><a href="#è¯†åˆ«æµ®ç‚¹æ•°" aria-hidden="true" class="header-anchor">#</a> è¯†åˆ«æµ®ç‚¹æ•°</h4> <p>æ–°çš„å‡½æ•°<code>recoFloat()</code>ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åªè¯†åˆ«ä¸€ç§é”™è¯¯ï¼Œå°±æ˜¯æµ®ç‚¹æ•°çš„é”™è¯¯ï¼Œæ‰€ä»¥ä¸‹é¢ä¼šæ¶‰åŠåˆ°é”™è¯¯å¤„ç†ï¼›æƒ³ä¸€æƒ³æµ®ç‚¹æ•°çš„ç‰¹ç‚¹<code>1e5 2e-5</code>éƒ½æ˜¯æ•°ï¼Œç†è§£äº†å°±å¾ˆç®€å•äº†ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>void LA::recoFloat() {
    word += ch; ch = getchar();
    if (ch == '+' || ch == '-') {
        word += ch; ch = getchar();
    }

    if (ch &lt; '1' || ch &gt; '9') {
        // å‡ºé”™ç›´æ¥ä¸­æ­¢é€€å‡ºï¼Œç®€å•ç²—æš´
        cout &lt;&lt; &quot;Error at Line &quot; &lt;&lt; line &lt;&lt; &quot;: Illegal floating point number \&quot;&quot; &lt;&lt; word &lt;&lt; &quot;\&quot;.\n&quot;;
        exit(-1);
        word.clear();
    }

    while(isdigit(ch)) {
        word += ch; ch = getchar();
    }
    show(&quot;float&quot;);
}
</code></pre></div><p>å…¨éƒ¨æ˜¯<code>if</code>åˆ¤æ–­ä¹Ÿæ²¡å•¥å¥½è§£é‡Šçš„ã€‚</p> <h4 id="å¤„ç†æ³¨é‡Š"><a href="#å¤„ç†æ³¨é‡Š" aria-hidden="true" class="header-anchor">#</a> å¤„ç†æ³¨é‡Š</h4> <p>å¥½äº†ï¼Œå‰é¢ä»‹ç»äº†å‡ ä¸ªå°è£…çš„å‡½æ•°ï¼Œç°åœ¨è¿˜æ˜¯å›åˆ°ä¸»çº¿ï¼Œ<code>scan()</code>å‡½æ•°è¿™é‡Œå§ï¼›æ³¨é‡Šçš„ç‰¹ç‚¹å°±æ˜¯ <code>/</code>æ‰“å¤´ï¼Œä½†æ˜¯ä¸è¦å¿˜è®°äº†ï¼Œ<code>/</code>æœ¬èº«å°±æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå½“æˆ‘ä»¬è¯†åˆ«åˆ°ä¸€ä¸ª<code>/</code>çš„æ—¶å€™ï¼Œæœ‰å¾ˆå¤šç§å¯èƒ½ï¼Œå¯èƒ½æ˜¯å•ä¸ªå­—ç¬¦çš„è¿ç®—ç¬¦ï¼Œä¹Ÿå¯èƒ½æ˜¯<code>/=</code>è¿™æ ·çš„è¿ç®—ç¬¦ï¼Œä¹Ÿå¯èƒ½æ˜¯<code>//</code>å•è¡Œæ³¨é‡Šï¼Œä¹Ÿå¯èƒ½æ˜¯<code>/*</code>å¤šè¡Œæ³¨é‡Šï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¯†åˆ«æ³¨é‡Šçš„æ—¶å€™æ˜¯ä¸åšä»»ä½•å¤„ç†çš„ï¼Œæ‰€ä»¥å°±é€‰æ‹©ä¸å»å½±å“æˆ‘ä»¬çš„<code>word</code>ï¼Œä½†æ˜¯åˆéœ€è¦è¯†åˆ«ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å°±å­˜åˆ°ä¸€ä¸ªä¸´æ—¶å˜é‡é‡Œé¢ã€‚</p> <p>åŒæ—¶ï¼Œå¦‚æœä¸‹ä¸€ä¸ªå­—ç¬¦å¹¶ä¸èƒ½è¢«è¯†åˆ«æˆæ³¨é‡Šæˆ–è€…<code>/=</code>ï¼Œæˆ‘ä»¬å°±æŠŠåˆšæ‰è¯†åˆ«åˆ°çš„å­—ç¬¦æ”¾å›åˆ°è¾“å…¥ç¼“å­˜åŒºä¸­ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨<code>ungetc(tmp, stdin);</code>åé¢åœ¨è¯†åˆ«å¤šè¡Œæ³¨é‡Šçš„ç»“æŸçš„åœ°æ–¹çš„æ—¶å€™ï¼Œä¹Ÿä¼šä½¿ç”¨åˆ°ç±»ä¼¼çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯æœ‰çš„æ—¶å€™éœ€è¦ä¸´æ—¶çœ‹ä¸€ä¸‹åé¢çš„å­—ç¬¦ï¼Œå¦‚æœä¸æ˜¯æƒ³è¦çš„è¿˜å¯ä»¥æ”¾å›ç¼“å­˜åŒºã€‚</p> <div class="language-c++ extra-class"><pre class="language-text"><code>// å¤„ç†æ³¨é‡Š
if (ch == '/') {
    tmp = getchar();
    if (tmp == '/') {
        // å•è¡Œæ³¨é‡Šï¼Œå°±åƒè¿™æ ·
        while ((ch = getchar()) != '\n');
    } else if (tmp == '*') {
        /* å¤šè¡Œæ³¨é‡Šå°±åƒæ˜¯è¿™æ · */
        while ((ch = getchar()) != EOF) {
            if (ch == '*') {
                tmp = getchar();
                if (tmp == '/') {
                    ch = getchar();
                    break;
                } else {
                    ungetc(tmp, stdin);
                }
            }
        }
    } else if (tmp == '=') {
        word += ch; word += tmp; ch = getchar();
        show(&quot;OPT&quot;);
    } else {
        word += ch;
        ungetc(tmp, stdin);
        show(&quot;OPT&quot;);
    }
}
</code></pre></div><h4 id="å¤„ç†ç¬¦å·"><a href="#å¤„ç†ç¬¦å·" aria-hidden="true" class="header-anchor">#</a> å¤„ç†ç¬¦å·</h4> <p>å¤„ç†è¿ç®—ç¬¦ï¼Œå¯ä»¥å•ä¸ªä½œä¸ºè¿ç®—ç¬¦ï¼Œä¹Ÿå¯ä»¥è·Ÿç­‰å·ä¸€èµ·ä½œä¸ºè¿ç®—ç¬¦ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>case '*':
case '=':
case '&lt;':
case '&gt;':
case '!':
    tmp = getchar();
    if(tmp == '='){
        word += ch;
        word += tmp; // '='
        ch = getchar();
        show(&quot;OPT&quot;);
        break;
    }
    else{
        ungetc(tmp, stdin);
        word += ch; ch = getchar();
        show(&quot;OPT&quot;);
        break;
    }
    break;
</code></pre></div><p>å¤„ç†åˆ†éš”ç¬¦ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>case ',': 
case '\\': 
case ';': 
case ':': 
case '(': 
case ')': 
case '[': 
case ']': 
case '{': 
case '}': 
case '&quot;': 
case '\'':
    word += ch; ch = getchar();
    show(&quot;bracket&quot;);
    break;
</code></pre></div><p>é¢˜ç›®ç±»å‹ä¸­è¿˜æœ‰ä¸€ç§ç‰¹åˆ«çš„ç±»å‹ï¼Œä»¥<code>&amp;</code>æˆ–<code>%</code>å¼€å¤´ï¼Œåé¢è·Ÿä¸€ä¸ªå­—æ¯æˆ–æ•°å­—çš„ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>case '%':
case '&amp;':
    tmp = getchar();
    if(isalnum(tmp)){
        word += ch;
        word += tmp;
        ch = getchar();
        show(&quot;typeidentify&quot;);
        break;
    } else {
        ungetc(tmp, stdin);
        break;
    }
</code></pre></div><p>å¯¹ <code>0</code>è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºä¸Šé¢åœ¨ç®—æ•°å­—çš„æ—¶å€™æ²¡æœ‰ç®—ä¸Š0ï¼š</p> <div class="language-c++ extra-class"><pre class="language-text"><code>// è¿™é‡Œå¯¹ 0 è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œåæ¥å¯ä»¥åœ¨åˆ¤æ–­å…«è¿›åˆ¶ä¸­è¿›è¡Œ
case '0':
    word += ch; ch = getchar();
    show(&quot;integer&quot;);
    break;

default:
    // ch = getchar();
    break;
</code></pre></div><h4 id="å®Œç»“æ’’èŠ±ï¼"><a href="#å®Œç»“æ’’èŠ±ï¼" aria-hidden="true" class="header-anchor">#</a> å®Œç»“æ’’èŠ±ï¼</h4> <p>ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰</p> <h2 id="ä»£ç è¯¦æƒ…"><a href="#ä»£ç è¯¦æƒ…" aria-hidden="true" class="header-anchor">#</a> ä»£ç è¯¦æƒ…</h2> <div class="language-c++ extra-class"><pre class="language-text"><code>#ifndef LEXICAL_ANALYZER_LA_H
#define LEXICAL_ANALYZER_LA_H

#include &lt;cctype&gt;
#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;


using namespace std;

//ä¿ç•™å­—æ•°ç»„
static string keywords[12] = {&quot;scanf&quot;,&quot;printf&quot;,&quot;if&quot;,&quot;else&quot;,&quot;for&quot;,&quot;while&quot;,&quot;return&quot;,&quot;do&quot;,&quot;main&quot;,&quot;abs&quot;,&quot;sqrt&quot;,&quot;float&quot;};
static string type[8] = {&quot;int&quot;,&quot;double&quot;,&quot;void&quot;,&quot;short&quot;,&quot;char&quot;,&quot;long&quot;,&quot;unsigned int&quot;};

struct Msg {
  int line;
  string token;
  string word;
  Msg* next = nullptr;
};

class LA {
private:
    string word; //å­˜æ”¾æ„æˆå•è¯çš„å­—ç¬¦ä¸²
    int line; //è®°å½•è¡Œæ•°
    char ch; //å­˜æ”¾æ¯æ¬¡è¯»å…¥çš„å­—ç¬¦
    Msg *m;
    Msg *p;
public:
    void show(string s);
    LA();
    void scan();
    void print();
    void recoNum();
    void recoFloat();
    bool isKeyWord();
    bool isType();
};

#endif //LEXICAL_ANALYZER_LA_H

using namespace std;

int main() {
    LA l;
    l.scan();
    l.print();
    return 0;
}

LA::LA():line(1), ch('\0') {
    m = new Msg;
    p = m;
}

void LA::show(string s) {
    Msg* tmp = new Msg;
    tmp-&gt;line = line;
    tmp-&gt;token = s;
    tmp-&gt;word = word;
    p-&gt;next = tmp;
    p = p-&gt;next;
    // cout&lt;&lt; &quot;line&quot; &lt;&lt; line &lt;&lt; &quot;:(&quot; &lt;&lt; s &lt;&lt; &quot;, &quot; &lt;&lt; word &lt;&lt;')'&lt;&lt; endl;
    word.clear();
} 

void LA::print() {
    p = m;
    p = p-&gt;next;
    while(p) {
        cout&lt;&lt; &quot;line&quot; &lt;&lt; p-&gt;line &lt;&lt; &quot;:(&quot; &lt;&lt; p-&gt;token &lt;&lt; &quot;, &quot; &lt;&lt; p-&gt;word &lt;&lt;')'&lt;&lt; endl;
        p = p-&gt;next;
    }
}

bool LA::isKeyWord() {
    for(int i = 0; i &lt; 12; i++){
        if(word == keywords[i])
            return true;
    }
    return false;
}

bool LA::isType() {
    for(int i = 0; i &lt; 8; i++){
        if(word == type[i])
            return true;
    }
    return false;
}

void LA::recoFloat() {
    word += ch; ch = getchar();
    if (ch == '+' || ch == '-') {
        word += ch; ch = getchar();
    }

    if (ch &lt; '1' || ch &gt; '9') {
        cout &lt;&lt; &quot;Error at Line &quot; &lt;&lt; line &lt;&lt; &quot;: Illegal floating point number \&quot;&quot; &lt;&lt; word &lt;&lt; &quot;\&quot;.\n&quot;;
        exit(-1);
        word.clear();
    }

    while(isdigit(ch)) {
        word += ch; ch = getchar();
    }
    show(&quot;float&quot;);
}

void LA::recoNum() {
    word += ch; ch = getchar();
    while (isdigit(ch)) {
        word += ch; ch = getchar();
    }

    // å¤„ç† decimal
    if (ch == '.') {
        word += ch; ch = getchar();
        if (!isdigit(ch)) {
            // æ­¤å¤„åº”è¯¥æŠ¥é”™ï¼
            word.clear();
        } else {
            while (isdigit(ch)) {
                word += ch; ch = getchar();
            }
            if (ch == 'e') {
                recoFloat();
            } else {
                show(&quot;decimal&quot;);
            }
        }
    }

    // å¤„ç† float
    else if (ch == 'e') {
        recoFloat();
    }

    else {
        show(&quot;integer&quot;);
    }


}

void LA::scan() {
    char tmp;
    //è¯»å–ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦
    do{
        ch = getchar();
        if(ch == 10)
            line++;
    } while(ch == ' ' || ch == 10);

    while(ch != '\0' &amp;&amp; ch != EOF){
        while(ch == ' ' || ch == 10){
            if(ch == 10)
                line++;
            ch = getchar();
        }

        //å¤„ç† keyword type identify
        if(ch == '_' || isalpha(ch)){
            word += ch;
            ch = getchar();
            while(isalnum(ch) || ch == '_'){
                word += ch;
                ch = getchar();
            }

            if (isKeyWord())
                show(&quot;keyword&quot;);
            else if (isType())
                show(&quot;type&quot;);
            else
                show(&quot;identify&quot;);
        }

        // å¤„ç† integer
        if (ch == '+' || ch == '-') {
            word += ch; ch = getchar();
            if(ch == '='){
                // æ“ä½œç¬¦
                word += ch; ch = getchar();
                show(&quot;OPT&quot;);
            } else if (ch == '0') {
                // å¯ä»¥æ˜¯è¯†åˆ«æˆä¸€ä¸ªæ•°å­—äº†
                word += ch; ch = getchar();
                show(&quot;integer&quot;);
            } else if (ch &gt;= '1' &amp;&amp; ch &lt;= '9') {
                // å¯èƒ½æ˜¯ä¸ªæ•°å­—
                recoNum();
            } else {
                // æ“ä½œç¬¦
                show(&quot;OPT&quot;);
            }
        }

        if (ch &gt;= '1' &amp;&amp; ch &lt;= '9') {
            recoNum();
        }
        
        // å¤„ç†æ³¨é‡Š
        if (ch == '/') {
            tmp = getchar();
            if (tmp == '/') {
                while ((ch = getchar()) != '\n');
            } else if (tmp == '*') {
                while ((ch = getchar()) != EOF) {
                    if (ch == '*') {
                        tmp = getchar();
                        if (tmp == '/') {
                            ch = getchar();
                            break;
                        } else {
                            ungetc(tmp, stdin);
                        }
                    }
                }
            } else if (tmp == '=') {
                word += ch; word += tmp; ch = getchar();
                show(&quot;OPT&quot;);
            } else {
                ungetc(tmp, stdin);
                show(&quot;OPT&quot;);
            }
        }

        //å¤„ç†ç¬¦å·
        switch(ch){
            //å¤„ç†è¿ç®—ç¬¦
            case '*':
            case '=':
            case '&lt;':
            case '&gt;':
            case '!':
                tmp = getchar();
                if(tmp == '='){
                    word += ch;
                    word += tmp; // '='
                    ch = getchar();
                    show(&quot;OPT&quot;);
                    break;
                }
                else{
                    ungetc(tmp, stdin);
                    word += ch; ch = getchar();
                    show(&quot;OPT&quot;);
                    break;
                }
                break;

            //å¤„ç†åˆ†éš”ç¬¦
            case ',': 
            case '\\': 
            case ';': 
            case ':': 
            case '(': 
            case ')': 
            case '[': 
            case ']': 
            case '{': 
            case '}': 
            case '&quot;': 
            case '\'':
                word += ch; ch = getchar();
                show(&quot;bracket&quot;);
                break;

            // å¤„ç† typeidentify
            case '%':
            case '&amp;':
                tmp = getchar();
                if(isalnum(tmp)){
                    word += ch;
                    word += tmp;
                    ch = getchar();
                    show(&quot;typeidentify&quot;);
                    break;
                } else {
                    ungetc(tmp, stdin);
                    break;
                }

            // è¿™é‡Œå¯¹ 0 è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œåæ¥å¯ä»¥åœ¨åˆ¤æ–­å…«è¿›åˆ¶ä¸­è¿›è¡Œ
            case '0':
                word += ch; ch = getchar();
                show(&quot;integer&quot;);
                break;

            default:
                // ch = getchar();
                break;
        }
            
    }
}
</code></pre></div><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" aria-hidden="true" class="header-anchor">#</a> å‚è€ƒé“¾æ¥</h2> <blockquote><p>[1] <a href="http://c.biancheng.net/cpp/u/ctype_h/" target="_blank" rel="noopener noreferrer">ctype.h - Cè¯­è¨€ä¸­æ–‡ç½‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[2] <a href="https://blog.csdn.net/wait_nothing_alone/article/details/78187971" target="_blank" rel="noopener noreferrer">ç®€å•Cè¯­è¨€è¯æ³•åˆ†æå™¨ï¼ˆC++å®ç°ï¼‰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¿®æ”¹äº: </span> <span class="time">1/7/2020, 3:36:53 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
            â†
            <a href="/lexical-analysis/" class="prev">
              ç¼–è¯‘åŸç†-æ„é€ è¯æ³•åˆ†æå™¨
            </a></span> <!----></p></div></div> <div class="my-menu" style="display:;"><div class="my-menu__item"><h3>ç›®å½•</h3> <a href="/lexical-analysis-2/#é¢˜ç›®åˆ†æ" class="my-menu__lv2" style="line-height: 1rem; display: block;">
            é¢˜ç›®åˆ†æ</a><a href="/lexical-analysis-2/#æ€è·¯åˆ†æ" class="my-menu__lv3" style="line-height: 1rem; display: block;">
            æ€è·¯åˆ†æ</a><a href="/lexical-analysis-2/#å®ç°æ–¹æ³•" class="my-menu__lv3" style="line-height: 1rem; display: block;">
            å®ç°æ–¹æ³•</a><a href="/lexical-analysis-2/#ä¸Šæ‰‹å®è·µ" class="my-menu__lv2" style="line-height: 1rem; display: block;">
            ä¸Šæ‰‹å®è·µ</a><a href="/lexical-analysis-2/#åˆå§‹åŒ–ç±»" class="my-menu__lv3" style="line-height: 1rem; display: block;">
            åˆå§‹åŒ–ç±»</a><a href="/lexical-analysis-2/#æ ‡è¯†ç¬¦åˆ¤æ–­" class="my-menu__lv3" style="line-height: 1rem; display: block;">
            æ ‡è¯†ç¬¦åˆ¤æ–­</a><a href="/lexical-analysis-2/#æ‰«æå‡½æ•°" class="my-menu__lv3" style="line-height: 1rem; display: block;">
            æ‰«æå‡½æ•°</a><a href="/lexical-analysis-2/#ä»£ç è¯¦æƒ…" class="my-menu__lv2" style="line-height: 1rem; display: block;">
            ä»£ç è¯¦æƒ…</a><a href="/lexical-analysis-2/#å‚è€ƒé“¾æ¥" class="my-menu__lv2" style="line-height: 1rem; display: block;">
            å‚è€ƒé“¾æ¥</a></div></div></div> </main></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e0933429.js" defer></script><script src="/assets/js/6.e75854f7.js" defer></script><script src="/assets/js/23.8ac8a227.js" defer></script>
  </body>
</html>
